<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
		xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		xmlns:valkey="http://www.springframework.org/schema/valkey"
		xmlns:task="http://www.springframework.org/schema/task"
		xsi:schemaLocation="http://www.springframework.org/schema/beans https://www.springframework.org/schema/beans/spring-beans.xsd
				http://www.springframework.org/schema/task https://www.springframework.org/schema/task/spring-task.xsd
				http://www.springframework.org/schema/valkey https://www.springframework.org/schema/valkey/spring-valkey-1.0.xsd">

	<!-- the default ConnectionFactory -->
	<bean id="valkeyConnectionFactory" class="io.valkey.springframework.data.valkey.connection.jedis.JedisConnectionFactory"/>

	<task:executor id="testTaskExecutor" />
	 			
	<valkey:listener-container topic-serializer="serializer" connection-factory="valkeyConnectionFactory">
		<!-- default handle method -->
		<valkey:listener ref="testBean1" topic="z1 z2 x*"/>
		<!-- channel subscription only -->
		<valkey:listener ref="testBean1" method="anotherHandle" topic="x1" serializer="serializer"/>
		<valkey:listener ref="testBean2" topic="exception"/>
	</valkey:listener-container>
	
	<bean id="testBean1" class="io.valkey.springframework.data.valkey.listener.adapter.ValkeyMDP"/>
	<bean id="testBean2" class="io.valkey.springframework.data.valkey.listener.adapter.ThrowableMessageListener"/>
	
	<bean id="serializer" class="io.valkey.springframework.data.valkey.serializer.StringValkeySerializer"/>
	
	<bean id="handler" class="io.valkey.springframework.data.valkey.config.StubErrorHandler"/>
	
	<bean id="valkeyTemplate" class="io.valkey.springframework.data.valkey.core.StringValkeyTemplate">
		<property name="connectionFactory" ref="valkeyConnectionFactory"/>
	</bean>
	
</beans>